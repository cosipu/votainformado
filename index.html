<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Decide Informado</title>
  <link rel="stylesheet" href="style.css">

  <!-- üì± PWA CONFIG -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#1a237e">


  <script>
    // Registrar service worker
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("/sw.js")
        .then(() => console.log("‚úÖ Service Worker registrado"))
        .catch(err => console.log("‚ùå Error Service Worker:", err));
    }
  </script>

  <style>
    /* ===== Ajustes para que los gr√°ficos no se mezclen con texto en m√≥viles ===== */
    .chart-flex {
      display: flex;
      flex-wrap: wrap;
      gap: 30px;
      background: rgba(30, 41, 59, 0.9);
      padding: 20px;
      border-radius: 10px;
      color: white;
    }

    .chart-flex>div {
      flex: 1;
      min-width: 280px;
    }

    .chart-flex canvas {
      width: 100% !important;
      height: 300px;
      /* altura base escritorio */
    }

    .chart-flex .text {
      flex: 2;
      min-width: 280px;
      max-width: 600px;
      text-align: justify;
      line-height: 1.6;
    }

    /* Ajustes para m√≥vil */
    @media (max-width: 700px) {
      .chart-flex {
        flex-direction: column;
      }

      .chart-flex canvas {
        height: 250px;
        /* altura m√°s peque√±a en m√≥vil */
        margin-bottom: 20px;
        /* separa del texto */
      }
    }

    /* Gr√°fico de delitos */
    .chart-container {
      width: 100%;
      height: 300px;
      /* altura base escritorio */
    }

    @media (max-width: 700px) {
      .chart-container {
        height: 250px;
        /* altura m√≥vil */
      }
    }
  </style>
</head>

<body>
  <header style="text-align:center;">
    <img src="assets/img/decide.png" alt="Logo" class="logo" style="height:400px; display:block; margin:0 auto;">

    <p style="margin:2px 0 0 0;" class="subtitulo">Conoce a los candidatos, sus partidos y sus antecedentes.</p>
  </header>

  <div id="comuna-selector">
    <label for="comunas">Quiero conocer mi distrito </label>
    <label for="comunas">Elige tu comuna: </label>
    <select id="comunas">
      <option value="">-- Selecciona una comuna --</option>
    </select>
    <p id="resultado-distrito"></p>
  </div>

  <!-- üîé FILTROS + BUSCADOR -->
  <div id="android-install-banner">
    üì≤ Instala <b>Decide Informado</b> en tu tel√©fono
    <br>
    <button id="android-install-btn">Instalar</button>
    <button id="android-close-btn">M√°s tarde</button>
  </div>

  <section id="filters" style="margin-bottom:20px;">
    <select id="filter-office">
      <option value="">Todos los cargos</option>
      <option value="Presidente">Presidente</option>
      <option value="Senador">Senador</option>
      <option value="Diputado">Diputado</option>
    </select>

    <select id="filter-party">
      <option value="">Todos los partidos</option>
    </select>

    <select id="filter-district">
      <option value="">Todos los distritos</option>
    </select>

    <!-- Buscador de candidatos -->

  </section>

  <center>
    <h1 style="color:#facc15; margin:16px 0 8px 0; font-size:2rem;">
      <a href="https://cosipu.github.io/aportes/" target="_blank" style="color:#facc15; text-decoration:underline;">
        Conoce los aportes econ√≥micos (click aqu√≠)
      </a>
    </h1>
  </center>

  <!-- Aqu√≠ se mostrar√°n los candidatos -->
  <main id="candidates"></main>

  <div class="voto-footer">
    <h3>¬øCu√°nto vale mi voto?</h3>
    <p>
      Para este a√±o cada voto equivale a <b>0.04 UF</b>, es decir aproximadamente <b>$1.554 CLP</b>.
    </p>

    <div class="candidatos-comparativa">
      <h4>Ejemplo de comparaci√≥n:</h4>
      <p>Jos√© Antonio Kast (2021): 1.961.387 votos ‚Üí $3.047.995.398</p>
      <p>Gabriel Boric (2021): 1.814.777 votos ‚Üí $2.820.163.458</p>
      <p>Franco Parisi (2021): 899.403 votos ‚Üí $1.397.672.262</p>
      <p>Sebasti√°n Sichel (2021): 898.510 votos ‚Üí $1.396.284.540</p>
      <p>Yasna Provoste (2021): 815.558 votos ‚Üí $1.267.377.132</p>
      <p>Marco Enr√≠quez Ominami (2021): 534.485 votos ‚Üí $830.589.690</p>
      <p>Eduardo Art√©s (2021): 103.181 votos ‚Üí $160.343.274</p>

      <label for="comparacion">Elegir equivalencia:</label>
      <select id="comparacion">
        <option value="ambulancia">üöë Medico Cirujano</option>
        <option value="vivienda">üè† Viviendas sociales</option>
        <option value="auto">üöì Autos de polic√≠a</option>
        <option value="pasaje">üöå Pasajes Transantiago</option>
      </select>

      <div class="botones-candidatos">
        <button onclick="mostrarEquivalencias('Jos√© Antonio Kast', 3047995398)">Comparar Kast</button>
        <button onclick="mostrarEquivalencias('Gabriel Boric', 2820163458)">Comparar Boric</button>
        <button onclick="mostrarEquivalencias('Franco Parisi', 1397672262)">Comparar Parisi</button>
        <button onclick="mostrarEquivalencias('Sebasti√°n Sichel', 1396284540)">Comparar Sichel</button>
        <button onclick="mostrarEquivalencias('Yasna Provoste', 1267377132)">Comparar Provoste</button>
        <button onclick="mostrarEquivalencias('Marco Enr√≠quez Ominami', 830589690)">Comparar Ominami</button>
        <button onclick="mostrarEquivalencias('Eduardo Art√©s', 160343274)">Comparar Art√©s</button>
      </div>
    </div>
  </div>

  <!-- Aqu√≠ se mostrar√°n las equivalencias -->
  <div id="equivalencias"></div>

  <p>
    <i>Estos c√°lculos corresponden a un valor referencial con la UF actual.
      El Servel realiza los pagos de acuerdo al valor vigente en el proceso electoral correspondiente.</i>
  </p>

  <!-- GR√ÅFICO + TEXTO -->
  <section class="chart-flex">
    <div>
      <h3 style="margin-bottom:10px;">Resumen nacional de candidatos</h3>
      <canvas id="eleccionesChart"></canvas>
    </div>
    <div class="text">
      <h4 style="margin-bottom:5px; color:#facc15;">Candidatos y reelecci√≥n</h4>
      <p>
        Conocer cu√°ntas veces un candidato se ha presentado a elecciones populares es clave para entender su rol en la
        pol√≠tica. Muchos postulan reiteradamente sin ser electos, pero reciben financiamiento p√∫blico en cada campa√±a,
        lo que transforma la pol√≠tica en una ‚Äúpyme‚Äù m√°s que en un servicio a la ciudadan√≠a.
      </p>
      <h4 style="margin-bottom:5px; color:#facc15;">Delitos y transparencia</h4>
      <p>
        Estos datos otorgan a los votantes herramientas para evitar que la pol√≠tica se convierta en un refugio de
        intereses personales y asegurar que quienes resulten electos representen de forma √≠ntegra a la ciudadan√≠a.
      </p>
      <h4 style="margin-bottom:5px; color:#facc15;">En resumen</h4>
      <p>
        Estos datos otorgan a los votantes herramientas para evitar que la pol√≠tica se convierta en un refugio de
        intereses personales...
      </p>
    </div>
  </section>

  <!-- GR√ÅFICO DELITOS -->
  <section style="margin: 20px 0; padding: 20px; background: rgba(30,41,59,0.9); border-radius:10px; color:white;">
    <h3 style="margin-bottom:12px; text-align:center;">Candidatos con delitos por partido / antecedentes</h3>
    <div class="chart-container">
      <canvas id="delitosChart"></canvas>
    </div>
  </section>

  <footer style="text-align:center; margin:20px;">
    <p> Dudas, Consultas, Reclamos: info@decideinformado.cl</p>
  </footer>
  <footer style="text-align:center; margin:20px;">
    <p> Datos obtenidos de fuentes p√∫blicas como Servel y medios oficiales.</p>
  </footer>


  <!-- Banner iOS -->
  <div id="ios-banner" style="
    display:none;
    position:fixed;
    bottom:20px;
    left:50%;
    transform:translateX(-50%);
    background:#1a237e;
    color:white;
    padding:15px 20px;
    border-radius:12px;
    box-shadow:0 4px 12px rgba(0,0,0,0.3);
    text-align:center;
    max-width:90%;
    z-index:1000;">
    <p style="margin:0 0 10px 0;">üì≤ Para instalar <b>Decide Informado</b> en iPhone:</p>
    <p style="margin:0 0 10px 0; font-size:14px;">
      1. Pulsa <span style="font-size:18px;">‚¨ÜÔ∏è</span> en Safari<br>
      2. Selecciona <b>‚ÄúAgregar a inicio‚Äù</b>
    </p>
    <button onclick="cerrarIosBanner()" style="
      background:#555;
      border:none;
      padding:8px 16px;
      border-radius:8px;
      cursor:pointer;
      color:white;">
      Cerrar
    </button>
  </div>

  <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
  <script>
    window.OneSignalDeferred = window.OneSignalDeferred || [];
    OneSignalDeferred.push(async function (OneSignal) {
      await OneSignal.init({
        appId: "7199eb5f-4c9c-4723-a4be-4e3e42836d59",
        safari_web_id: "web.onesignal.auto.380fb02b-8aa0-443a-a38d-87b1b457c3de",
        notifyButton: {
          enable: true,
        },
      });
    });
  </script>







  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="script.js"></script>
</body>

</html>